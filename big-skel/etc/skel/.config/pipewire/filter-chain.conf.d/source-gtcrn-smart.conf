# BigLinux Microphone Enhanced Filter Chain
# Auto-generated configuration - Stereo output with Dual Mono

context.modules = [
    {
        name = libpipewire-module-filter-chain
        args = {
            node.description = "Noise Canceling Microphone"
            media.name = "Noise Canceling Microphone"
            filter.graph = {
                nodes = [
                    {
                        type = ladspa
                        name = "ai"
                        plugin = "/usr/lib/ladspa/libgtcrn_ladspa.so"
                        label = "gtcrn_mono"
                        control = {
                            "Enable" = 1.0
                            "Strength" = 1.0
                            "Model" = 1
                        }
                    }
                    {
                        type = ladspa
                        name = "gate"
                        plugin = "/usr/lib/ladspa/gate_1410.so"
                        label = "gate"
                        control = {
                            "Threshold (dB)" = -30
                            "Attack (ms)" = 20.0
                            "Hold (ms)" = 300.0
                            "Decay (ms)" = 150.0
                            "Range (dB)" = -60
                            "LF key filter (Hz)" = 20.0
                            "HF key filter (Hz)" = 20000.0
                            "Output select (-1 = key listen, 0 = gate, 1 = bypass)" = 0
                        }
                    }
                    # Copy node to tee the signal
                    {
                        type = builtin
                        name = "copy_tee"
                        label = copy
                    }
                    # Left channel output (direct copy)
                    {
                        type = builtin
                        name = "copy_left"
                        label = copy
                    }
                    # Right channel output (copy)
                    {
                        type = builtin
                        name = "copy_right"
                        label = copy
                    }
                ]
                links = [
                    { output = "ai:Output" input = "gate:Input" }
                    { output = "gate:Output" input = "copy_tee:In" }
                    { output = "copy_tee:Out" input = "copy_left:In" }
                    { output = "copy_tee:Out" input = "copy_right:In" }
                ]
                inputs = [ "ai:Input" ]
                outputs = [ "copy_left:Out" "copy_right:Out" ]
            }
            capture.props = {
                audio.position = [ MONO ]
                node.passive = true
            }
            playback.props = {
                node.pause-on-idle = false
                audio.rate = 48000
                audio.position = [ FL FR ]
                filter.smart = true
                media.class = "Audio/Source"
                filter.smart.name = "big.filter-microphone"
            }
        }
    }
]
